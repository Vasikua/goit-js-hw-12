{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport axios from \"axios\";\n\nconst KEY = '42549902-185aac32f1223c9241b6c0bc7';\nconst BASE_URI = 'https://pixabay.com/api/';\nconst loader = document.querySelector('.loader');\n\nexport async function getImages(searchTerm, page, per_page) {\n    loader.style.display = 'block';\n    try {\n        const response = await axios.get(BASE_URI, {\n            params: {\n                key: KEY,\n                q: searchTerm,\n                image_type: 'photo',\n                orientation: 'horizontal',\n                safesearch: true,\n                page: page,\n                per_page: per_page,\n            },\n        });\n\n        const data = response.data;\n        if (data.hits.length === 0) {\n                    iziToast.error({\n                        position: 'topRight',\n                        message: (\"Sorry, there are no images matching your search query. Please try again!\")\n                    });\n        }\n                   \n        loader.style.display = 'none';\n        return data;\n    } catch (error) {\n    console.error('Error ', error.message);\n        }\n}\n\n","import SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nconst gallery = document.querySelector('.gallery');\nconst img = gallery.querySelectorAll('img');\nconst loadMoreBtn = document.querySelector('.add-content');\nconst lightbox = new SimpleLightbox(\".gallery a\", {\n    captionPosition: 'bottom',\n    captionDelay: '250',\n    captionsData: 'alt',\n    close: true,\n    animationSpeed: 200,\n    preloading: true,\n    loop:\ttrue,\n    scaleImageToRatio: true,\n    scrollZoomFactor: 0.9,\n    overlay: true,\n    overlayOpacity: 1.0,\n    spinner:\ttrue\n});\nexport function renderData(data) {\n        const img = data.hits;\n        const arrayOfImg = img.map(({ webformatURL, largeImageURL, tags, likes, views, comments, downloads }) => {\n                return `<li class=\"list-link\">\n                            <a href=\"${largeImageURL}\">\n                                <img class=\"gallery-links\" src=\"${webformatURL}\" alt=\"${tags}\"></a>\n                            <div class=\"parameters\">\n                                    <ul class=\"parameters-list\">\n                                        <li class=\"parameters-list-item\">likes:</li>\n                                        <li class=\"parameters-list-item\">${likes}</li>\n                                    </ul>\n                                    <ul class=\"parameters-list\">\n                                        <li class=\"parameters-list-item\">views:</li>\n                                        <li class=\"parameters-list-item\">${views}</li>\n                                    </ul>\n                                    <ul class=\"parameters-list\">\n                                        <li class=\"parameters-list-item\">comments:</li>\n                                        <li class=\"parameters-list-item\">${comments}</li>\n                                    </ul>\n                                    <ul class=\"parameters-list\">\n                                        <li class=\"parameters-list-item\">downloads:</li>\n                                        <li class=\"parameters-list-item\">${downloads}</li>\n                                    </ul>\n                            </div>\n                        </li>`\n       }).join('');\n     \n    gallery.insertAdjacentHTML('beforeend', arrayOfImg);\n  \n    if (img.length > 14) {\n        loadMoreBtn.style.display = 'block';\n    }\n    lightbox.refresh();\n};\n","import { getImages } from \"./js/pixabay-api\";\nimport { renderData } from \"./js/render-functions\";\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nlet page;\nlet searchTerm;\nconst per_page = 15;\nconst gallery = document.querySelector('.gallery');\nconst form = document.querySelector('form');\nconst loadMoreBtn = document.querySelector('.add-content');\n\nform.addEventListener('submit', (event) => {\n    event.preventDefault();\n    gallery.innerHTML = \"\";\n    searchTerm = event.target.elements.serchfield.value.trim();\n    \n    if (searchTerm.length > 0) {\n        getImages(searchTerm, page, per_page).then((data) => renderData(data));\n        page = 1;\n        form.reset();\n    } else {\n        loadMoreBtn.style.display = 'none';\n    }\n});\n\nloadMoreBtn.addEventListener('click', () => {\n    page++;\n     \n    getImages(searchTerm, page, per_page).then((data) => {\n        renderData(data); \n        smoothScrolling();\n        if (data.hits.length < 15) {\n            loadMoreBtn.style.display = 'none';\n            iziToast.error({\n                    position: 'topRight',\n                    message: (\"We're sorry, but you've reached the end of search results.\")\n                });\n            }\n        });\n    \n});\n\nfunction smoothScrolling() {\n    const pictHeight = gallery.firstElementChild.getBoundingClientRect().height;\n    window.scrollBy({\n        top: 2 * pictHeight, \n        behavior: 'smooth',\n    })\n}"],"names":["KEY","BASE_URI","loader","getImages","searchTerm","page","per_page","data","axios","iziToast","error","gallery","loadMoreBtn","lightbox","SimpleLightbox","renderData","img","arrayOfImg","webformatURL","largeImageURL","tags","likes","views","comments","downloads","form","event","smoothScrolling","pictHeight"],"mappings":"owBAIA,MAAMA,EAAM,qCACNC,EAAW,2BACXC,EAAS,SAAS,cAAc,SAAS,EAExC,eAAeC,EAAUC,EAAYC,EAAMC,EAAU,CACxDJ,EAAO,MAAM,QAAU,QACvB,GAAI,CAaA,MAAMK,GAZW,MAAMC,EAAM,IAAIP,EAAU,CACvC,OAAQ,CACJ,IAAKD,EACL,EAAGI,EACH,WAAY,QACZ,YAAa,aACb,WAAY,GACZ,KAAMC,EACN,SAAUC,CACb,CACb,CAAS,GAEqB,KACtB,OAAIC,EAAK,KAAK,SAAW,GACbE,EAAS,MAAM,CACX,SAAU,WACV,QAAU,0EAClC,CAAqB,EAGbP,EAAO,MAAM,QAAU,OAChBK,CACV,OAAQG,EAAO,CAChB,QAAQ,MAAM,SAAUA,EAAM,OAAO,CAChC,CACT,CCjCA,MAAMC,EAAU,SAAS,cAAc,UAAU,EACrCA,EAAQ,iBAAiB,KAAK,EAC1C,MAAMC,EAAc,SAAS,cAAc,cAAc,EACnDC,EAAW,IAAIC,EAAe,aAAc,CAC9C,gBAAiB,SACjB,aAAc,MACd,aAAc,MACd,MAAO,GACP,eAAgB,IAChB,WAAY,GACZ,KAAM,GACN,kBAAmB,GACnB,iBAAkB,GAClB,QAAS,GACT,eAAgB,EAChB,QAAS,EACb,CAAC,EACM,SAASC,EAAWR,EAAM,CACzB,MAAMS,EAAMT,EAAK,KACXU,EAAaD,EAAI,IAAI,CAAC,CAAE,aAAAE,EAAc,cAAAC,EAAe,KAAAC,EAAM,MAAAC,EAAO,MAAAC,EAAO,SAAAC,EAAU,UAAAC,CAAS,IACnF;AAAA,uCACgBL,CAAa;AAAA,kEACcD,CAAY,UAAUE,CAAI;AAAA;AAAA;AAAA;AAAA,2EAIjBC,CAAK;AAAA;AAAA;AAAA;AAAA,2EAILC,CAAK;AAAA;AAAA;AAAA;AAAA,2EAILC,CAAQ;AAAA;AAAA;AAAA;AAAA,2EAIRC,CAAS;AAAA;AAAA;AAAA,8BAI5E,EAAE,KAAK,EAAE,EAEbb,EAAQ,mBAAmB,YAAaM,CAAU,EAE9CD,EAAI,OAAS,KACbJ,EAAY,MAAM,QAAU,SAEhCC,EAAS,QAAO,CACpB,CChDA,IAAIR,EACAD,EACJ,MAAME,EAAW,GACXK,EAAU,SAAS,cAAc,UAAU,EAC3Cc,EAAO,SAAS,cAAc,MAAM,EACpCb,EAAc,SAAS,cAAc,cAAc,EAEzDa,EAAK,iBAAiB,SAAWC,GAAU,CACvCA,EAAM,eAAc,EACpBf,EAAQ,UAAY,GACpBP,EAAasB,EAAM,OAAO,SAAS,WAAW,MAAM,OAEhDtB,EAAW,OAAS,GACpBD,EAAUC,EAAYC,EAAMC,CAAQ,EAAE,KAAMC,GAASQ,EAAWR,CAAI,CAAC,EACrEF,EAAO,EACPoB,EAAK,MAAK,GAEVb,EAAY,MAAM,QAAU,MAEpC,CAAC,EAEDA,EAAY,iBAAiB,QAAS,IAAM,CACxCP,IAEAF,EAAUC,EAAYC,EAAMC,CAAQ,EAAE,KAAMC,GAAS,CACjDQ,EAAWR,CAAI,EACfoB,IACIpB,EAAK,KAAK,OAAS,KACnBK,EAAY,MAAM,QAAU,OAC5BH,EAAS,MAAM,CACP,SAAU,WACV,QAAU,4DAC9B,CAAiB,EAEjB,CAAS,CAET,CAAC,EAED,SAASkB,GAAkB,CACvB,MAAMC,EAAajB,EAAQ,kBAAkB,sBAAqB,EAAG,OACrE,OAAO,SAAS,CACZ,IAAK,EAAIiB,EACT,SAAU,QAClB,CAAK,CACL"}